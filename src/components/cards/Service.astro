---
// Your imports and props setup
import Paragraph from '../shared/Paragraph.astro';

export interface Props {
    id: string,
    title: string,
    description: string,
    icon: string
}

// Function to toggle the description

const toggleDescription = (id: string): void => {
    debugger;
    console.log(id);
    const desc = document.querySelector(`.description-${id}`) as HTMLElement | null;
    if (desc) {
        desc.style.display = desc.style.display === 'none' ? 'block' : 'none';
    }
}

const { id, title, description, icon } = Astro.props;
---

<div class="p-5 sm:p-6 lg:p-8 rounded-3xl border border-box-border bg-box-bg shadow-lg shadow-box-shadow relative overflow-hidden toggleLink" data-target=`description-${id}`>
    <div class="rounded-xl bg-gray-300 dark:bg-gray-950 p-3 text-heading-1 w-max relative">
        <button> <!--popovertarget=`description-${id}`-->
            <slot set:html={icon} />
        </button>
    </div>

    <div class="mt-6 space-y-4 relative">
        <h2 class="text-lg md:text-xl font-semibold text-heading-2">
            {title}
        </h2>
        <div class={`md:text-lg text-heading-3 description-${id} hidden` }  id=`description-${id}` ><!--popover-->
            {description.split(";").map(x=><li>{x}</li>)}
        </div>
    </div>
    <span class="absolute w-32 aspect-square -bottom-16 -right-16 bg-primary/10 rounded-full"></span>
</div>

<script>
    // JavaScript to toggle the ul based on the clicked anchor
    document.querySelectorAll('.toggleLink').forEach(function(link) {
      link.addEventListener('click', function(event) {
        event.preventDefault(); // Prevent anchor default behavior
        
        const targetId = this.getAttribute('data-target');
        const ulElement = document.getElementById(targetId);
        
        if (ulElement.classList.contains('hidden')) {
          ulElement.classList.remove('hidden'); // Show the list
        } else {
          ulElement.classList.add('hidden'); // Hide the list
        }
      });
    });
  </script>